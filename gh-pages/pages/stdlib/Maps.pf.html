
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>

    <link rel="stylesheet" href="../../css/normalize.css">
    <link rel="stylesheet" href="../../css/stdlib.css">
</head>
<body>
    <pre><code>
<span class="stdlib-keyword">import</span> <a href="Set.pf.html"><span class="stdlib-import"">Set</span></a>
<span class="stdlib-keyword">import</span> <a href="Option.pf.html"><span class="stdlib-import"">Option</span></a>

<span class="stdlib-keyword">define</span> <span class="stdlib-keyword">operator</span> <span class="stdlib-operator">&#x2218;</span> <span class="stdlib-operator">=</span> <span class="stdlib-keyword">generic</span> <span class="stdlib-ident">T</span><span class="stdlib-operator">,</span><span class="stdlib-ident">U</span><span class="stdlib-operator">,</span><span class="stdlib-ident">V</span> <span class="stdlib-operator">{</span> <span class="stdlib-operator">&#x03BB;</span> <span class="stdlib-ident">g</span><span class="stdlib-operator">:</span><span class="stdlib-type">fn</span> <span class="stdlib-ident">U</span><span class="stdlib-operator">-&gt;</span><span class="stdlib-ident">V</span><span class="stdlib-operator">,</span> <span class="stdlib-ident">f</span><span class="stdlib-operator">:</span><span class="stdlib-type">fn</span> <span class="stdlib-ident">T</span><span class="stdlib-operator">-&gt;</span><span class="stdlib-ident">U</span> <span class="stdlib-operator">{</span>
                        <span class="stdlib-operator">&#x03BB;</span> <span class="stdlib-ident">x</span><span class="stdlib-operator">:</span><span class="stdlib-ident">T</span> <span class="stdlib-operator">{</span> <span class="stdlib-ident">g</span><span class="stdlib-operator">(</span><span class="stdlib-ident">f</span><span class="stdlib-operator">(</span><span class="stdlib-ident">x</span><span class="stdlib-operator">)</span><span class="stdlib-operator">)</span> <span class="stdlib-operator">}</span> <span class="stdlib-operator">}</span> <span class="stdlib-operator">}</span>

<span class="stdlib-keyword">define</span> <span class="stdlib-ident">update</span> <span class="stdlib-operator">=</span> <span class="stdlib-keyword">generic</span> <span class="stdlib-ident">T</span><span class="stdlib-operator">,</span> <span class="stdlib-ident">U</span> <span class="stdlib-operator">{</span> <span class="stdlib-operator">&#x03BB;</span><span class="stdlib-ident">f</span><span class="stdlib-operator">:</span><span class="stdlib-type">fn</span> <span class="stdlib-ident">T</span><span class="stdlib-operator">-&gt;</span><span class="stdlib-ident">U</span><span class="stdlib-operator">,</span> <span class="stdlib-ident">x</span><span class="stdlib-operator">:</span><span class="stdlib-ident">T</span><span class="stdlib-operator">,</span> <span class="stdlib-ident">v</span><span class="stdlib-operator">:</span><span class="stdlib-ident">U</span><span class="stdlib-operator">{</span> <span class="stdlib-operator">&#x03BB;</span><span class="stdlib-ident">y</span><span class="stdlib-operator">:</span><span class="stdlib-ident">T</span> <span class="stdlib-operator">{</span>
                   <span class="stdlib-keyword">if</span> <span class="stdlib-ident">y</span> <span class="stdlib-operator">=</span> <span class="stdlib-ident">x</span> <span class="stdlib-keyword">then</span> <span class="stdlib-ident">v</span> <span class="stdlib-keyword">else</span> <span class="stdlib-ident">f</span><span class="stdlib-operator">(</span><span class="stdlib-ident">y</span><span class="stdlib-operator">)</span> <span class="stdlib-operator">}</span> <span class="stdlib-operator">}</span> <span class="stdlib-operator">}</span>

<span class="stdlib-keyword">theorem</span> <a href="Maps.pf.html#update_eq170"><span id="update_eq170" class="stdlib-theorem">update_eq</span></a> <span class="stdlib-operator">:</span>
  <a href="Nat.pf.html#operator<199"><span class="stdlib-operator">&lt;</span></a> <span class="stdlib-ident">T</span><span class="stdlib-operator">,</span> <span class="stdlib-ident">U</span> <a href="Nat.pf.html#operator>200"><span class="stdlib-operator">&gt;</span></a> <span class="stdlib-keyword">all</span> <span class="stdlib-ident">f</span><span class="stdlib-operator">:</span> <span class="stdlib-type">fn</span> <span class="stdlib-operator">(</span><span class="stdlib-ident">T</span><span class="stdlib-operator">)</span> <span class="stdlib-operator">-&gt;</span> <span class="stdlib-ident">U</span><span class="stdlib-operator">,</span> <span class="stdlib-ident">x</span><span class="stdlib-operator">:</span><span class="stdlib-ident">T</span><span class="stdlib-operator">,</span> <span class="stdlib-ident">v</span><span class="stdlib-operator">:</span><span class="stdlib-ident">U</span><span class="stdlib-operator">.</span>
  <span class="stdlib-ident">update</span><span class="stdlib-operator">(</span><span class="stdlib-ident">f</span><span class="stdlib-operator">,</span> <span class="stdlib-ident">x</span><span class="stdlib-operator">,</span> <span class="stdlib-ident">v</span><span class="stdlib-operator">)</span><span class="stdlib-operator">(</span><span class="stdlib-ident">x</span><span class="stdlib-operator">)</span> <span class="stdlib-operator">=</span> <span class="stdlib-ident">v</span>
<span class="stdlib-keyword">proof</span>
  <span class="stdlib-keyword">arbitrary</span> <span class="stdlib-ident">T</span><span class="stdlib-operator">:</span><span class="stdlib-type">type</span><span class="stdlib-operator">,</span> <span class="stdlib-ident">U</span><span class="stdlib-operator">:</span><span class="stdlib-type">type</span>
  <span class="stdlib-keyword">arbitrary</span> <span class="stdlib-ident">f</span><span class="stdlib-operator">:</span> <span class="stdlib-type">fn</span> <span class="stdlib-operator">(</span><span class="stdlib-ident">T</span><span class="stdlib-operator">)</span> <span class="stdlib-operator">-&gt;</span> <span class="stdlib-ident">U</span><span class="stdlib-operator">,</span> <span class="stdlib-ident">x</span><span class="stdlib-operator">:</span><span class="stdlib-ident">T</span><span class="stdlib-operator">,</span> <span class="stdlib-ident">v</span><span class="stdlib-operator">:</span><span class="stdlib-ident">U</span>
  <span class="stdlib-keyword">definition</span> <span class="stdlib-ident">update</span>
<span class="stdlib-keyword">end</span>

<span class="stdlib-keyword">theorem</span> <a href="Maps.pf.html#update_not_eq171"><span id="update_not_eq171" class="stdlib-theorem">update_not_eq</span></a> <span class="stdlib-operator">:</span>
  <a href="Nat.pf.html#operator<199"><span class="stdlib-operator">&lt;</span></a> <span class="stdlib-ident">T</span><span class="stdlib-operator">,</span> <span class="stdlib-ident">U</span> <a href="Nat.pf.html#operator>200"><span class="stdlib-operator">&gt;</span></a> <span class="stdlib-keyword">all</span> <span class="stdlib-ident">f</span><span class="stdlib-operator">:</span> <span class="stdlib-type">fn</span> <span class="stdlib-operator">(</span><span class="stdlib-ident">T</span><span class="stdlib-operator">)</span> <span class="stdlib-operator">-&gt;</span> <span class="stdlib-ident">U</span><span class="stdlib-operator">,</span> <span class="stdlib-ident">x</span><span class="stdlib-operator">:</span><span class="stdlib-ident">T</span><span class="stdlib-operator">,</span> <span class="stdlib-ident">v</span><span class="stdlib-operator">:</span><span class="stdlib-ident">U</span><span class="stdlib-operator">,</span> <span class="stdlib-ident">y</span><span class="stdlib-operator">:</span><span class="stdlib-ident">T</span><span class="stdlib-operator">.</span>
  <span class="stdlib-keyword">if</span> <span class="stdlib-keyword">not</span> <span class="stdlib-operator">(</span><span class="stdlib-ident">x</span> <span class="stdlib-operator">=</span> <span class="stdlib-ident">y</span><span class="stdlib-operator">)</span>
  <span class="stdlib-keyword">then</span> <span class="stdlib-ident">update</span><span class="stdlib-operator">(</span><span class="stdlib-ident">f</span><span class="stdlib-operator">,</span> <span class="stdlib-ident">x</span><span class="stdlib-operator">,</span> <span class="stdlib-ident">v</span><span class="stdlib-operator">)</span><span class="stdlib-operator">(</span><span class="stdlib-ident">y</span><span class="stdlib-operator">)</span> <span class="stdlib-operator">=</span> <span class="stdlib-ident">f</span><span class="stdlib-operator">(</span><span class="stdlib-ident">y</span><span class="stdlib-operator">)</span>
<span class="stdlib-keyword">proof</span>
  <span class="stdlib-keyword">arbitrary</span> <span class="stdlib-ident">T</span><span class="stdlib-operator">:</span><span class="stdlib-type">type</span><span class="stdlib-operator">,</span> <span class="stdlib-ident">U</span><span class="stdlib-operator">:</span><span class="stdlib-type">type</span>
  <span class="stdlib-keyword">arbitrary</span> <span class="stdlib-ident">f</span><span class="stdlib-operator">:</span> <span class="stdlib-type">fn</span> <span class="stdlib-operator">(</span><span class="stdlib-ident">T</span><span class="stdlib-operator">)</span> <span class="stdlib-operator">-&gt;</span> <span class="stdlib-ident">U</span><span class="stdlib-operator">,</span> <span class="stdlib-ident">x</span><span class="stdlib-operator">:</span><span class="stdlib-ident">T</span><span class="stdlib-operator">,</span> <span class="stdlib-ident">v</span><span class="stdlib-operator">:</span><span class="stdlib-ident">U</span><span class="stdlib-operator">,</span> <span class="stdlib-ident">y</span><span class="stdlib-operator">:</span><span class="stdlib-ident">T</span>
  <span class="stdlib-keyword">suppose</span> <span class="stdlib-ident">not_eq</span>
  <span class="stdlib-keyword">switch</span> <span class="stdlib-ident">y</span> <span class="stdlib-operator">=</span> <span class="stdlib-ident">x</span> <span class="stdlib-keyword">for</span> <span class="stdlib-ident">update</span> <span class="stdlib-operator">{</span>
    <span class="stdlib-keyword">case</span> <span class="stdlib-prim">true</span> <span class="stdlib-keyword">suppose</span> <span class="stdlib-ident">yx_true</span> <span class="stdlib-operator">{</span>
      <span class="stdlib-keyword">have</span> <span class="stdlib-ident">yx</span><span class="stdlib-operator">:</span> <span class="stdlib-ident">y</span> <span class="stdlib-operator">=</span> <span class="stdlib-ident">x</span> <span class="stdlib-keyword">by</span> <span class="stdlib-keyword">rewrite</span> <span class="stdlib-ident">yx_true</span>
      <span class="stdlib-keyword">have</span> <span class="stdlib-ident">xy</span><span class="stdlib-operator">:</span> <span class="stdlib-ident">x</span> <span class="stdlib-operator">=</span> <span class="stdlib-ident">y</span> <span class="stdlib-keyword">by</span> <span class="stdlib-keyword">symmetric</span> <span class="stdlib-ident">yx</span>
      <span class="stdlib-keyword">conclude</span> <span class="stdlib-prim">false</span> <span class="stdlib-keyword">by</span> <span class="stdlib-keyword">apply</span> <span class="stdlib-ident">not_eq</span> <span class="stdlib-keyword">to</span> <span class="stdlib-ident">xy</span>
    <span class="stdlib-operator">}</span>
    <span class="stdlib-keyword">case</span> <span class="stdlib-prim">false</span> <span class="stdlib-operator">{</span>
      <span class="stdlib-operator">.</span>
    <span class="stdlib-operator">}</span>
  <span class="stdlib-operator">}</span>
<span class="stdlib-keyword">end</span>

<span class="stdlib-keyword">theorem</span> <a href="Maps.pf.html#update_shadow172"><span id="update_shadow172" class="stdlib-theorem">update_shadow</span></a> <span class="stdlib-operator">:</span> <span class="stdlib-keyword">all</span> <span class="stdlib-ident">T</span><span class="stdlib-operator">:</span><span class="stdlib-type">type</span><span class="stdlib-operator">,</span> <span class="stdlib-ident">U</span><span class="stdlib-operator">:</span><span class="stdlib-type">type</span><span class="stdlib-operator">.</span> <span class="stdlib-keyword">all</span> <span class="stdlib-ident">f</span><span class="stdlib-operator">:</span><span class="stdlib-type">fn</span><span class="stdlib-operator">(</span><span class="stdlib-ident">T</span><span class="stdlib-operator">)</span><span class="stdlib-operator">-&gt;</span><span class="stdlib-ident">U</span><span class="stdlib-operator">,</span> <span class="stdlib-ident">x</span><span class="stdlib-operator">:</span><span class="stdlib-ident">T</span><span class="stdlib-operator">,</span> <span class="stdlib-ident">v</span><span class="stdlib-operator">:</span><span class="stdlib-ident">U</span><span class="stdlib-operator">,</span> <span class="stdlib-ident">w</span><span class="stdlib-operator">:</span><span class="stdlib-ident">U</span><span class="stdlib-operator">.</span>
  <span class="stdlib-ident">update</span><span class="stdlib-operator">(</span><span class="stdlib-ident">update</span><span class="stdlib-operator">(</span><span class="stdlib-ident">f</span><span class="stdlib-operator">,</span> <span class="stdlib-ident">x</span><span class="stdlib-operator">,</span> <span class="stdlib-ident">v</span><span class="stdlib-operator">)</span><span class="stdlib-operator">,</span> <span class="stdlib-ident">x</span><span class="stdlib-operator">,</span> <span class="stdlib-ident">w</span><span class="stdlib-operator">)</span> <span class="stdlib-operator">=</span> <span class="stdlib-ident">update</span><span class="stdlib-operator">(</span><span class="stdlib-ident">f</span><span class="stdlib-operator">,</span> <span class="stdlib-ident">x</span><span class="stdlib-operator">,</span> <span class="stdlib-ident">w</span><span class="stdlib-operator">)</span>
<span class="stdlib-keyword">proof</span>
  <span class="stdlib-keyword">arbitrary</span> <span class="stdlib-ident">T</span><span class="stdlib-operator">:</span><span class="stdlib-type">type</span><span class="stdlib-operator">,</span> <span class="stdlib-ident">U</span><span class="stdlib-operator">:</span><span class="stdlib-type">type</span>
  <span class="stdlib-keyword">arbitrary</span> <span class="stdlib-ident">f</span><span class="stdlib-operator">:</span><span class="stdlib-type">fn</span><span class="stdlib-operator">(</span><span class="stdlib-ident">T</span><span class="stdlib-operator">)</span><span class="stdlib-operator">-&gt;</span><span class="stdlib-ident">U</span><span class="stdlib-operator">,</span> <span class="stdlib-ident">x</span><span class="stdlib-operator">:</span><span class="stdlib-ident">T</span><span class="stdlib-operator">,</span> <span class="stdlib-ident">v</span><span class="stdlib-operator">:</span><span class="stdlib-ident">U</span><span class="stdlib-operator">,</span> <span class="stdlib-ident">w</span><span class="stdlib-operator">:</span><span class="stdlib-ident">U</span>
  <span class="stdlib-keyword">extensionality</span>
  <span class="stdlib-keyword">arbitrary</span> <span class="stdlib-ident">y</span><span class="stdlib-operator">:</span><span class="stdlib-ident">T</span>
  <span class="stdlib-keyword">switch</span> <span class="stdlib-ident">y</span> <span class="stdlib-operator">=</span> <span class="stdlib-ident">x</span> <span class="stdlib-keyword">for</span> <span class="stdlib-ident">update</span> <span class="stdlib-operator">{</span>
    <span class="stdlib-keyword">case</span> <span class="stdlib-prim">true</span> <span class="stdlib-operator">{</span> <span class="stdlib-operator">.</span> <span class="stdlib-operator">}</span>
    <span class="stdlib-keyword">case</span> <span class="stdlib-prim">false</span> <span class="stdlib-operator">{</span> <span class="stdlib-operator">.</span> <span class="stdlib-operator">}</span>
  <span class="stdlib-operator">}</span>
<span class="stdlib-keyword">end</span>

<span class="stdlib-keyword">theorem</span> <a href="Maps.pf.html#update_permute173"><span id="update_permute173" class="stdlib-theorem">update_permute</span></a> <span class="stdlib-operator">:</span>
  <a href="Nat.pf.html#operator<199"><span class="stdlib-operator">&lt;</span></a> <span class="stdlib-ident">T</span><span class="stdlib-operator">,</span> <span class="stdlib-ident">U</span> <a href="Nat.pf.html#operator>200"><span class="stdlib-operator">&gt;</span></a> <span class="stdlib-keyword">all</span> <span class="stdlib-ident">f</span><span class="stdlib-operator">:</span><span class="stdlib-type">fn</span><span class="stdlib-operator">(</span><span class="stdlib-ident">T</span><span class="stdlib-operator">)</span><span class="stdlib-operator">-&gt;</span><span class="stdlib-ident">U</span><span class="stdlib-operator">,</span> <span class="stdlib-ident">x</span><span class="stdlib-operator">:</span><span class="stdlib-ident">T</span><span class="stdlib-operator">,</span> <span class="stdlib-ident">v</span><span class="stdlib-operator">:</span><span class="stdlib-ident">U</span><span class="stdlib-operator">,</span> <span class="stdlib-ident">w</span><span class="stdlib-operator">:</span><span class="stdlib-ident">U</span><span class="stdlib-operator">,</span> <span class="stdlib-ident">y</span><span class="stdlib-operator">:</span><span class="stdlib-ident">T</span><span class="stdlib-operator">.</span>
  <span class="stdlib-keyword">if</span> <span class="stdlib-keyword">not</span> <span class="stdlib-operator">(</span><span class="stdlib-ident">x</span> <span class="stdlib-operator">=</span> <span class="stdlib-ident">y</span><span class="stdlib-operator">)</span>
  <span class="stdlib-keyword">then</span> <span class="stdlib-ident">update</span><span class="stdlib-operator">(</span><span class="stdlib-ident">update</span><span class="stdlib-operator">(</span><span class="stdlib-ident">f</span><span class="stdlib-operator">,</span> <span class="stdlib-ident">x</span><span class="stdlib-operator">,</span> <span class="stdlib-ident">v</span><span class="stdlib-operator">)</span><span class="stdlib-operator">,</span> <span class="stdlib-ident">y</span><span class="stdlib-operator">,</span> <span class="stdlib-ident">w</span><span class="stdlib-operator">)</span> <span class="stdlib-operator">=</span> <span class="stdlib-ident">update</span><span class="stdlib-operator">(</span><span class="stdlib-ident">update</span><span class="stdlib-operator">(</span><span class="stdlib-ident">f</span><span class="stdlib-operator">,</span> <span class="stdlib-ident">y</span><span class="stdlib-operator">,</span> <span class="stdlib-ident">w</span><span class="stdlib-operator">)</span><span class="stdlib-operator">,</span> <span class="stdlib-ident">x</span><span class="stdlib-operator">,</span> <span class="stdlib-ident">v</span><span class="stdlib-operator">)</span>
<span class="stdlib-keyword">proof</span>
  <span class="stdlib-keyword">arbitrary</span> <span class="stdlib-ident">T</span><span class="stdlib-operator">:</span><span class="stdlib-type">type</span><span class="stdlib-operator">,</span> <span class="stdlib-ident">U</span><span class="stdlib-operator">:</span><span class="stdlib-type">type</span>
  <span class="stdlib-keyword">arbitrary</span> <span class="stdlib-ident">f</span><span class="stdlib-operator">:</span><span class="stdlib-type">fn</span><span class="stdlib-operator">(</span><span class="stdlib-ident">T</span><span class="stdlib-operator">)</span><span class="stdlib-operator">-&gt;</span><span class="stdlib-ident">U</span><span class="stdlib-operator">,</span> <span class="stdlib-ident">x</span><span class="stdlib-operator">:</span><span class="stdlib-ident">T</span><span class="stdlib-operator">,</span> <span class="stdlib-ident">v</span><span class="stdlib-operator">:</span><span class="stdlib-ident">U</span><span class="stdlib-operator">,</span> <span class="stdlib-ident">w</span><span class="stdlib-operator">:</span><span class="stdlib-ident">U</span><span class="stdlib-operator">,</span> <span class="stdlib-ident">y</span><span class="stdlib-operator">:</span><span class="stdlib-ident">T</span>
  <span class="stdlib-keyword">suppose</span> <span class="stdlib-ident">x_neq_y</span>
  <span class="stdlib-keyword">extensionality</span>
  <span class="stdlib-keyword">arbitrary</span> <span class="stdlib-ident">z</span><span class="stdlib-operator">:</span><span class="stdlib-ident">T</span>
  <span class="stdlib-keyword">switch</span> <span class="stdlib-ident">z</span> <span class="stdlib-operator">=</span> <span class="stdlib-ident">y</span> <span class="stdlib-keyword">for</span> <span class="stdlib-ident">update</span> <span class="stdlib-operator">{</span>
    <span class="stdlib-keyword">case</span> <span class="stdlib-prim">true</span> <span class="stdlib-keyword">suppose</span> <span class="stdlib-ident">zy_true</span> <span class="stdlib-operator">{</span>
      <span class="stdlib-keyword">have</span> <span class="stdlib-ident">zy</span><span class="stdlib-operator">:</span> <span class="stdlib-ident">z</span> <span class="stdlib-operator">=</span> <span class="stdlib-ident">y</span> <span class="stdlib-keyword">by</span> <span class="stdlib-keyword">rewrite</span> <span class="stdlib-ident">zy_true</span>
      <span class="stdlib-keyword">switch</span> <span class="stdlib-ident">z</span> <span class="stdlib-operator">=</span> <span class="stdlib-ident">x</span> <span class="stdlib-operator">{</span>
        <span class="stdlib-keyword">case</span> <span class="stdlib-prim">true</span> <span class="stdlib-keyword">suppose</span> <span class="stdlib-ident">zx_true</span> <span class="stdlib-operator">{</span>
	  <span class="stdlib-keyword">have</span> <span class="stdlib-ident">zx</span><span class="stdlib-operator">:</span> <span class="stdlib-ident">z</span> <span class="stdlib-operator">=</span> <span class="stdlib-ident">x</span> <span class="stdlib-keyword">by</span> <span class="stdlib-keyword">rewrite</span> <span class="stdlib-ident">zx_true</span>
	  <span class="stdlib-keyword">have</span> <span class="stdlib-ident">xy</span><span class="stdlib-operator">:</span> <span class="stdlib-ident">x</span> <span class="stdlib-operator">=</span> <span class="stdlib-ident">y</span> <span class="stdlib-keyword">by</span> <span class="stdlib-keyword">transitive</span> <span class="stdlib-operator">(</span><span class="stdlib-keyword">symmetric</span> <span class="stdlib-ident">zx</span><span class="stdlib-operator">)</span> <span class="stdlib-ident">zy</span>
	  <span class="stdlib-keyword">conclude</span> <span class="stdlib-prim">false</span> <span class="stdlib-keyword">by</span> <span class="stdlib-keyword">apply</span> <span class="stdlib-ident">x_neq_y</span> <span class="stdlib-keyword">to</span> <span class="stdlib-ident">xy</span>
	<span class="stdlib-operator">}</span>
	<span class="stdlib-keyword">case</span> <span class="stdlib-prim">false</span> <span class="stdlib-operator">{</span>
	  <span class="stdlib-operator">.</span>
	<span class="stdlib-operator">}</span>
      <span class="stdlib-operator">}</span>
    <span class="stdlib-operator">}</span>
    <span class="stdlib-keyword">case</span> <span class="stdlib-prim">false</span> <span class="stdlib-operator">{</span>
      <span class="stdlib-operator">.</span>
    <span class="stdlib-operator">}</span>
  <span class="stdlib-operator">}</span>
<span class="stdlib-keyword">end</span>

<span class="stdlib-comment">/* Partial Maps */</span>

<span class="stdlib-keyword">define</span> <span class="stdlib-ident">empty_map</span> <span class="stdlib-operator">=</span> <span class="stdlib-keyword">generic</span> <span class="stdlib-ident">T</span><span class="stdlib-operator">,</span> <span class="stdlib-ident">U</span> <span class="stdlib-operator">{</span> <span class="stdlib-operator">&#x03BB;</span><span class="stdlib-ident">k</span><span class="stdlib-operator">:</span><span class="stdlib-ident">T</span> <span class="stdlib-operator">{</span> <span class="stdlib-operator">@</span><a href="Option.pf.html#Option339"><span class="stdlib-constructor">none</span></a><a href="Nat.pf.html#operator<199"><span class="stdlib-operator">&lt;</span></a><span class="stdlib-ident">U</span><a href="Nat.pf.html#operator>200"><span class="stdlib-operator">&gt;</span></a> <span class="stdlib-operator">}</span> <span class="stdlib-operator">}</span>

<span class="stdlib-keyword">define</span> <a href="Maps.pf.html#domain174"><span id="domain174" class="stdlib-function">domain</span></a> <span class="stdlib-operator">:</span> <span class="stdlib-type">fn</span><a href="Nat.pf.html#operator<199"><span class="stdlib-operator">&lt;</span></a><span class="stdlib-ident">T</span><span class="stdlib-operator">,</span><span class="stdlib-ident">U</span><a href="Nat.pf.html#operator>200"><span class="stdlib-operator">&gt;</span></a>  <span class="stdlib-operator">(</span><span class="stdlib-type">fn</span><span class="stdlib-operator">(</span><span class="stdlib-ident">T</span><span class="stdlib-operator">)</span><span class="stdlib-operator">-&gt;</span><a href="Option.pf.html#Option339"><span class="stdlib-union">Option</span></a><a href="Nat.pf.html#operator<199"><span class="stdlib-operator">&lt;</span></a><span class="stdlib-ident">U</span><a href="Nat.pf.html#operator>200"><span class="stdlib-operator">&gt;</span></a><span class="stdlib-operator">)</span> <span class="stdlib-operator">-&gt;</span> <a href="Set.pf.html#Set346"><span class="stdlib-union">Set</span></a><a href="Nat.pf.html#operator<199"><span class="stdlib-operator">&lt;</span></a><span class="stdlib-ident">T</span><a href="Nat.pf.html#operator>200"><span class="stdlib-operator">&gt;</span></a>
              <span class="stdlib-operator">=</span> <span class="stdlib-keyword">generic</span> <span class="stdlib-ident">T</span><span class="stdlib-operator">,</span> <span class="stdlib-ident">U</span> <span class="stdlib-operator">{</span> <span class="stdlib-operator">&#x03BB;</span><span class="stdlib-ident">f</span><span class="stdlib-operator">:</span> <span class="stdlib-type">fn</span><span class="stdlib-operator">(</span><span class="stdlib-ident">T</span><span class="stdlib-operator">)</span><span class="stdlib-operator">-&gt;</span><a href="Option.pf.html#Option339"><span class="stdlib-union">Option</span></a><a href="Nat.pf.html#operator<199"><span class="stdlib-operator">&lt;</span></a><span class="stdlib-ident">U</span><a href="Nat.pf.html#operator>200"><span class="stdlib-operator">&gt;</span></a> <span class="stdlib-operator">{</span><a href="Set.pf.html#Set346"><span class="stdlib-constructor">char_fun</span></a><span class="stdlib-operator">(</span><span class="stdlib-operator">&#x03BB;</span><span class="stdlib-ident">x</span><span class="stdlib-operator">:</span><span class="stdlib-ident">T</span><span class="stdlib-operator">{</span>
                  <span class="stdlib-keyword">switch</span> <span class="stdlib-ident">f</span><span class="stdlib-operator">(</span><span class="stdlib-ident">x</span><span class="stdlib-operator">)</span> <span class="stdlib-operator">{</span>
	            <span class="stdlib-keyword">case</span> <a href="Option.pf.html#Option339"><span class="stdlib-constructor">none</span></a> <span class="stdlib-operator">{</span> <span class="stdlib-prim">false</span> <span class="stdlib-operator">}</span>
		    <span class="stdlib-keyword">case</span> <a href="Option.pf.html#Option339"><span class="stdlib-constructor">just</span></a><span class="stdlib-operator">(</span><span class="stdlib-ident">y</span><span class="stdlib-operator">)</span> <span class="stdlib-operator">{</span> <span class="stdlib-prim">true</span> <span class="stdlib-operator">}</span>
		<span class="stdlib-operator">}</span><span class="stdlib-operator">}</span><span class="stdlib-operator">)</span><span class="stdlib-operator">}</span><span class="stdlib-operator">}</span>

<span class="stdlib-keyword">define</span> <span class="stdlib-ident">restrict</span> <span class="stdlib-operator">=</span> <span class="stdlib-keyword">generic</span> <span class="stdlib-ident">T</span><span class="stdlib-operator">,</span> <span class="stdlib-ident">U</span> <span class="stdlib-operator">{</span> <span class="stdlib-operator">&#x03BB;</span><span class="stdlib-ident">f</span><span class="stdlib-operator">:</span><span class="stdlib-type">fn</span><span class="stdlib-operator">(</span><span class="stdlib-ident">T</span><span class="stdlib-operator">)</span><span class="stdlib-operator">-&gt;</span><a href="Option.pf.html#Option339"><span class="stdlib-union">Option</span></a><a href="Nat.pf.html#operator<199"><span class="stdlib-operator">&lt;</span></a><span class="stdlib-ident">U</span><a href="Nat.pf.html#operator>200"><span class="stdlib-operator">&gt;</span></a><span class="stdlib-operator">,</span> <span class="stdlib-ident">P</span><span class="stdlib-operator">:</span><a href="Set.pf.html#Set346"><span class="stdlib-union">Set</span></a><a href="Nat.pf.html#operator<199"><span class="stdlib-operator">&lt;</span></a><span class="stdlib-ident">T</span><a href="Nat.pf.html#operator>200"><span class="stdlib-operator">&gt;</span></a> <span class="stdlib-operator">{</span> <span class="stdlib-operator">&#x03BB;</span><span class="stdlib-ident">x</span><span class="stdlib-operator">:</span><span class="stdlib-ident">T</span> <span class="stdlib-operator">{</span>
                      <span class="stdlib-keyword">if</span> <span class="stdlib-ident">x</span> <a href="Set.pf.html#operator∈351"><span class="stdlib-operator">&#x2208;</span></a> <span class="stdlib-ident">P</span> <span class="stdlib-keyword">then</span> <span class="stdlib-ident">f</span><span class="stdlib-operator">(</span><span class="stdlib-ident">x</span><span class="stdlib-operator">)</span> <span class="stdlib-keyword">else</span> <span class="stdlib-operator">@</span><a href="Option.pf.html#Option339"><span class="stdlib-constructor">none</span></a><a href="Nat.pf.html#operator<199"><span class="stdlib-operator">&lt;</span></a><span class="stdlib-ident">U</span><a href="Nat.pf.html#operator>200"><span class="stdlib-operator">&gt;</span></a> <span class="stdlib-operator">}</span><span class="stdlib-operator">}</span><span class="stdlib-operator">}</span>

<span class="stdlib-keyword">define</span> <span class="stdlib-ident">combine</span> <span class="stdlib-operator">=</span> <span class="stdlib-keyword">generic</span> <span class="stdlib-ident">T</span><span class="stdlib-operator">,</span> <span class="stdlib-ident">U</span> <span class="stdlib-operator">{</span> <span class="stdlib-keyword">fun</span> <span class="stdlib-ident">f</span><span class="stdlib-operator">:</span><span class="stdlib-type">fn</span><span class="stdlib-operator">(</span><span class="stdlib-ident">T</span><span class="stdlib-operator">)</span><span class="stdlib-operator">-&gt;</span><a href="Option.pf.html#Option339"><span class="stdlib-union">Option</span></a><a href="Nat.pf.html#operator<199"><span class="stdlib-operator">&lt;</span></a><span class="stdlib-ident">U</span><a href="Nat.pf.html#operator>200"><span class="stdlib-operator">&gt;</span></a><span class="stdlib-operator">,</span> <span class="stdlib-ident">g</span><span class="stdlib-operator">:</span><span class="stdlib-type">fn</span><span class="stdlib-operator">(</span><span class="stdlib-ident">T</span><span class="stdlib-operator">)</span><span class="stdlib-operator">-&gt;</span><a href="Option.pf.html#Option339"><span class="stdlib-union">Option</span></a><a href="Nat.pf.html#operator<199"><span class="stdlib-operator">&lt;</span></a><span class="stdlib-ident">U</span><a href="Nat.pf.html#operator>200"><span class="stdlib-operator">&gt;</span></a> <span class="stdlib-operator">{</span> <span class="stdlib-keyword">fun</span> <span class="stdlib-ident">x</span><span class="stdlib-operator">:</span><span class="stdlib-ident">T</span> <span class="stdlib-operator">{</span>
                     <span class="stdlib-keyword">if</span> <span class="stdlib-ident">f</span><span class="stdlib-operator">(</span><span class="stdlib-ident">x</span><span class="stdlib-operator">)</span> <span class="stdlib-operator">=</span> <a href="Option.pf.html#Option339"><span class="stdlib-constructor">none</span></a> <span class="stdlib-keyword">then</span> <span class="stdlib-ident">g</span><span class="stdlib-operator">(</span><span class="stdlib-ident">x</span><span class="stdlib-operator">)</span> <span class="stdlib-keyword">else</span> <span class="stdlib-ident">f</span><span class="stdlib-operator">(</span><span class="stdlib-ident">x</span><span class="stdlib-operator">)</span> <span class="stdlib-operator">}</span><span class="stdlib-operator">}</span><span class="stdlib-operator">}</span>

<span class="stdlib-keyword">theorem</span> <a href="Maps.pf.html#combine_left175"><span id="combine_left175" class="stdlib-theorem">combine_left</span></a><span class="stdlib-operator">:</span> <span class="stdlib-keyword">all</span> <span class="stdlib-ident">T</span><span class="stdlib-operator">:</span><span class="stdlib-type">type</span><span class="stdlib-operator">,</span> <span class="stdlib-ident">U</span><span class="stdlib-operator">:</span><span class="stdlib-type">type</span><span class="stdlib-operator">.</span> <span class="stdlib-keyword">all</span> <span class="stdlib-ident">f</span><span class="stdlib-operator">:</span><span class="stdlib-type">fn</span><span class="stdlib-operator">(</span><span class="stdlib-ident">T</span><span class="stdlib-operator">)</span><span class="stdlib-operator">-&gt;</span><a href="Option.pf.html#Option339"><span class="stdlib-union">Option</span></a><a href="Nat.pf.html#operator<199"><span class="stdlib-operator">&lt;</span></a><span class="stdlib-ident">U</span><a href="Nat.pf.html#operator>200"><span class="stdlib-operator">&gt;</span></a><span class="stdlib-operator">,</span> <span class="stdlib-ident">g</span><span class="stdlib-operator">:</span><span class="stdlib-type">fn</span><span class="stdlib-operator">(</span><span class="stdlib-ident">T</span><span class="stdlib-operator">)</span><span class="stdlib-operator">-&gt;</span><a href="Option.pf.html#Option339"><span class="stdlib-union">Option</span></a><a href="Nat.pf.html#operator<199"><span class="stdlib-operator">&lt;</span></a><span class="stdlib-ident">U</span><a href="Nat.pf.html#operator>200"><span class="stdlib-operator">&gt;</span></a><span class="stdlib-operator">,</span> <span class="stdlib-ident">x</span><span class="stdlib-operator">:</span><span class="stdlib-ident">T</span><span class="stdlib-operator">.</span>
  <span class="stdlib-keyword">if</span> <span class="stdlib-ident">g</span><span class="stdlib-operator">(</span><span class="stdlib-ident">x</span><span class="stdlib-operator">)</span> <span class="stdlib-operator">=</span> <a href="Option.pf.html#Option339"><span class="stdlib-constructor">none</span></a>
  <span class="stdlib-keyword">then</span> <span class="stdlib-ident">combine</span><span class="stdlib-operator">(</span><span class="stdlib-ident">f</span><span class="stdlib-operator">,</span> <span class="stdlib-ident">g</span><span class="stdlib-operator">)</span><span class="stdlib-operator">(</span><span class="stdlib-ident">x</span><span class="stdlib-operator">)</span> <span class="stdlib-operator">=</span> <span class="stdlib-ident">f</span><span class="stdlib-operator">(</span><span class="stdlib-ident">x</span><span class="stdlib-operator">)</span>
<span class="stdlib-keyword">proof</span>
  <span class="stdlib-keyword">arbitrary</span> <span class="stdlib-ident">T</span><span class="stdlib-operator">:</span><span class="stdlib-type">type</span><span class="stdlib-operator">,</span> <span class="stdlib-ident">U</span><span class="stdlib-operator">:</span><span class="stdlib-type">type</span>
  <span class="stdlib-keyword">arbitrary</span> <span class="stdlib-ident">f</span><span class="stdlib-operator">:</span><span class="stdlib-type">fn</span><span class="stdlib-operator">(</span><span class="stdlib-ident">T</span><span class="stdlib-operator">)</span><span class="stdlib-operator">-&gt;</span><a href="Option.pf.html#Option339"><span class="stdlib-union">Option</span></a><a href="Nat.pf.html#operator<199"><span class="stdlib-operator">&lt;</span></a><span class="stdlib-ident">U</span><a href="Nat.pf.html#operator>200"><span class="stdlib-operator">&gt;</span></a><span class="stdlib-operator">,</span> <span class="stdlib-ident">g</span><span class="stdlib-operator">:</span><span class="stdlib-type">fn</span><span class="stdlib-operator">(</span><span class="stdlib-ident">T</span><span class="stdlib-operator">)</span><span class="stdlib-operator">-&gt;</span><a href="Option.pf.html#Option339"><span class="stdlib-union">Option</span></a><a href="Nat.pf.html#operator<199"><span class="stdlib-operator">&lt;</span></a><span class="stdlib-ident">U</span><a href="Nat.pf.html#operator>200"><span class="stdlib-operator">&gt;</span></a><span class="stdlib-operator">,</span> <span class="stdlib-ident">x</span><span class="stdlib-operator">:</span><span class="stdlib-ident">T</span>
  <span class="stdlib-keyword">assume</span><span class="stdlib-operator">:</span> <span class="stdlib-ident">g</span><span class="stdlib-operator">(</span><span class="stdlib-ident">x</span><span class="stdlib-operator">)</span> <span class="stdlib-operator">=</span> <a href="Option.pf.html#Option339"><span class="stdlib-constructor">none</span></a>
  <span class="stdlib-keyword">switch</span> <span class="stdlib-ident">f</span><span class="stdlib-operator">(</span><span class="stdlib-ident">x</span><span class="stdlib-operator">)</span> <span class="stdlib-operator">{</span>
    <span class="stdlib-keyword">case</span> <a href="Option.pf.html#Option339"><span class="stdlib-constructor">none</span></a> <span class="stdlib-keyword">assume</span><span class="stdlib-operator">:</span> <span class="stdlib-ident">f</span><span class="stdlib-operator">(</span><span class="stdlib-ident">x</span><span class="stdlib-operator">)</span> <span class="stdlib-operator">=</span> <a href="Option.pf.html#Option339"><span class="stdlib-constructor">none</span></a> <span class="stdlib-operator">{</span>
      <span class="stdlib-keyword">conclude</span> <span class="stdlib-ident">combine</span><span class="stdlib-operator">(</span><span class="stdlib-ident">f</span><span class="stdlib-operator">,</span> <span class="stdlib-ident">g</span><span class="stdlib-operator">)</span><span class="stdlib-operator">(</span><span class="stdlib-ident">x</span><span class="stdlib-operator">)</span> <span class="stdlib-operator">=</span> <span class="stdlib-ident">f</span><span class="stdlib-operator">(</span><span class="stdlib-ident">x</span><span class="stdlib-operator">)</span>
          <span class="stdlib-keyword">by</span> <span class="stdlib-keyword">definition</span> <span class="stdlib-ident">combine</span> <span class="stdlib-keyword">and</span> <span class="stdlib-keyword">rewrite</span> <span class="stdlib-operator">(</span><span class="stdlib-keyword">recall</span> <span class="stdlib-ident">f</span><span class="stdlib-operator">(</span><span class="stdlib-ident">x</span><span class="stdlib-operator">)</span> <span class="stdlib-operator">=</span> <a href="Option.pf.html#Option339"><span class="stdlib-constructor">none</span></a><span class="stdlib-operator">)</span> <span class="stdlib-operator">|</span> <span class="stdlib-operator">(</span><span class="stdlib-keyword">recall</span> <span class="stdlib-ident">g</span><span class="stdlib-operator">(</span><span class="stdlib-ident">x</span><span class="stdlib-operator">)</span> <span class="stdlib-operator">=</span> <a href="Option.pf.html#Option339"><span class="stdlib-constructor">none</span></a><span class="stdlib-operator">)</span>
    <span class="stdlib-operator">}</span>
    <span class="stdlib-keyword">case</span> <a href="Option.pf.html#Option339"><span class="stdlib-constructor">just</span></a><span class="stdlib-operator">(</span><span class="stdlib-ident">v</span><span class="stdlib-operator">)</span> <span class="stdlib-keyword">assume</span><span class="stdlib-operator">:</span> <span class="stdlib-ident">f</span><span class="stdlib-operator">(</span><span class="stdlib-ident">x</span><span class="stdlib-operator">)</span> <span class="stdlib-operator">=</span> <a href="Option.pf.html#Option339"><span class="stdlib-constructor">just</span></a><span class="stdlib-operator">(</span><span class="stdlib-ident">v</span><span class="stdlib-operator">)</span> <span class="stdlib-operator">{</span>
      <span class="stdlib-keyword">conclude</span> <span class="stdlib-ident">combine</span><span class="stdlib-operator">(</span><span class="stdlib-ident">f</span><span class="stdlib-operator">,</span> <span class="stdlib-ident">g</span><span class="stdlib-operator">)</span><span class="stdlib-operator">(</span><span class="stdlib-ident">x</span><span class="stdlib-operator">)</span> <span class="stdlib-operator">=</span> <span class="stdlib-ident">f</span><span class="stdlib-operator">(</span><span class="stdlib-ident">x</span><span class="stdlib-operator">)</span>
          <span class="stdlib-keyword">by</span> <span class="stdlib-keyword">definition</span> <span class="stdlib-ident">combine</span> <span class="stdlib-keyword">and</span> <span class="stdlib-keyword">rewrite</span> <span class="stdlib-operator">(</span><span class="stdlib-keyword">recall</span> <span class="stdlib-ident">f</span><span class="stdlib-operator">(</span><span class="stdlib-ident">x</span><span class="stdlib-operator">)</span> <span class="stdlib-operator">=</span> <a href="Option.pf.html#Option339"><span class="stdlib-constructor">just</span></a><span class="stdlib-operator">(</span><span class="stdlib-ident">v</span><span class="stdlib-operator">)</span><span class="stdlib-operator">)</span>
    <span class="stdlib-operator">}</span>
  <span class="stdlib-operator">}</span>
<span class="stdlib-keyword">end</span>

<span class="stdlib-keyword">theorem</span> <a href="Maps.pf.html#combine_right176"><span id="combine_right176" class="stdlib-theorem">combine_right</span></a><span class="stdlib-operator">:</span> <span class="stdlib-keyword">all</span> <span class="stdlib-ident">T</span><span class="stdlib-operator">:</span><span class="stdlib-type">type</span><span class="stdlib-operator">,</span> <span class="stdlib-ident">U</span><span class="stdlib-operator">:</span><span class="stdlib-type">type</span><span class="stdlib-operator">.</span> <span class="stdlib-keyword">all</span> <span class="stdlib-ident">f</span><span class="stdlib-operator">:</span><span class="stdlib-type">fn</span><span class="stdlib-operator">(</span><span class="stdlib-ident">T</span><span class="stdlib-operator">)</span><span class="stdlib-operator">-&gt;</span><a href="Option.pf.html#Option339"><span class="stdlib-union">Option</span></a><a href="Nat.pf.html#operator<199"><span class="stdlib-operator">&lt;</span></a><span class="stdlib-ident">U</span><a href="Nat.pf.html#operator>200"><span class="stdlib-operator">&gt;</span></a><span class="stdlib-operator">,</span> <span class="stdlib-ident">g</span><span class="stdlib-operator">:</span><span class="stdlib-type">fn</span><span class="stdlib-operator">(</span><span class="stdlib-ident">T</span><span class="stdlib-operator">)</span><span class="stdlib-operator">-&gt;</span><a href="Option.pf.html#Option339"><span class="stdlib-union">Option</span></a><a href="Nat.pf.html#operator<199"><span class="stdlib-operator">&lt;</span></a><span class="stdlib-ident">U</span><a href="Nat.pf.html#operator>200"><span class="stdlib-operator">&gt;</span></a><span class="stdlib-operator">,</span> <span class="stdlib-ident">x</span><span class="stdlib-operator">:</span><span class="stdlib-ident">T</span><span class="stdlib-operator">.</span>
  <span class="stdlib-keyword">if</span> <span class="stdlib-ident">f</span><span class="stdlib-operator">(</span><span class="stdlib-ident">x</span><span class="stdlib-operator">)</span> <span class="stdlib-operator">=</span> <a href="Option.pf.html#Option339"><span class="stdlib-constructor">none</span></a>
  <span class="stdlib-keyword">then</span> <span class="stdlib-ident">combine</span><span class="stdlib-operator">(</span><span class="stdlib-ident">f</span><span class="stdlib-operator">,</span> <span class="stdlib-ident">g</span><span class="stdlib-operator">)</span><span class="stdlib-operator">(</span><span class="stdlib-ident">x</span><span class="stdlib-operator">)</span> <span class="stdlib-operator">=</span> <span class="stdlib-ident">g</span><span class="stdlib-operator">(</span><span class="stdlib-ident">x</span><span class="stdlib-operator">)</span>
<span class="stdlib-keyword">proof</span>
  <span class="stdlib-keyword">arbitrary</span> <span class="stdlib-ident">T</span><span class="stdlib-operator">:</span><span class="stdlib-type">type</span><span class="stdlib-operator">,</span> <span class="stdlib-ident">U</span><span class="stdlib-operator">:</span><span class="stdlib-type">type</span>
  <span class="stdlib-keyword">arbitrary</span> <span class="stdlib-ident">f</span><span class="stdlib-operator">:</span><span class="stdlib-type">fn</span><span class="stdlib-operator">(</span><span class="stdlib-ident">T</span><span class="stdlib-operator">)</span><span class="stdlib-operator">-&gt;</span><a href="Option.pf.html#Option339"><span class="stdlib-union">Option</span></a><a href="Nat.pf.html#operator<199"><span class="stdlib-operator">&lt;</span></a><span class="stdlib-ident">U</span><a href="Nat.pf.html#operator>200"><span class="stdlib-operator">&gt;</span></a><span class="stdlib-operator">,</span> <span class="stdlib-ident">g</span><span class="stdlib-operator">:</span><span class="stdlib-type">fn</span><span class="stdlib-operator">(</span><span class="stdlib-ident">T</span><span class="stdlib-operator">)</span><span class="stdlib-operator">-&gt;</span><a href="Option.pf.html#Option339"><span class="stdlib-union">Option</span></a><a href="Nat.pf.html#operator<199"><span class="stdlib-operator">&lt;</span></a><span class="stdlib-ident">U</span><a href="Nat.pf.html#operator>200"><span class="stdlib-operator">&gt;</span></a><span class="stdlib-operator">,</span> <span class="stdlib-ident">x</span><span class="stdlib-operator">:</span><span class="stdlib-ident">T</span>
  <span class="stdlib-keyword">assume</span><span class="stdlib-operator">:</span> <span class="stdlib-ident">f</span><span class="stdlib-operator">(</span><span class="stdlib-ident">x</span><span class="stdlib-operator">)</span> <span class="stdlib-operator">=</span> <a href="Option.pf.html#Option339"><span class="stdlib-constructor">none</span></a>
  <span class="stdlib-keyword">conclude</span> <span class="stdlib-ident">combine</span><span class="stdlib-operator">(</span><span class="stdlib-ident">f</span><span class="stdlib-operator">,</span> <span class="stdlib-ident">g</span><span class="stdlib-operator">)</span><span class="stdlib-operator">(</span><span class="stdlib-ident">x</span><span class="stdlib-operator">)</span> <span class="stdlib-operator">=</span> <span class="stdlib-ident">g</span><span class="stdlib-operator">(</span><span class="stdlib-ident">x</span><span class="stdlib-operator">)</span>
      <span class="stdlib-keyword">by</span> <span class="stdlib-keyword">definition</span> <span class="stdlib-ident">combine</span> <span class="stdlib-keyword">and</span> <span class="stdlib-keyword">rewrite</span> <span class="stdlib-keyword">recall</span> <span class="stdlib-ident">f</span><span class="stdlib-operator">(</span><span class="stdlib-ident">x</span><span class="stdlib-operator">)</span> <span class="stdlib-operator">=</span> <a href="Option.pf.html#Option339"><span class="stdlib-constructor">none</span></a>
<span class="stdlib-keyword">end</span>

<span class="stdlib-keyword">theorem</span> <a href="Maps.pf.html#restrict_domain177"><span id="restrict_domain177" class="stdlib-theorem">restrict_domain</span></a><span class="stdlib-operator">:</span>
  <a href="Nat.pf.html#operator<199"><span class="stdlib-operator">&lt;</span></a> <span class="stdlib-ident">T</span><span class="stdlib-operator">,</span> <span class="stdlib-ident">U</span> <a href="Nat.pf.html#operator>200"><span class="stdlib-operator">&gt;</span></a> <span class="stdlib-keyword">all</span> <span class="stdlib-ident">f</span><span class="stdlib-operator">:</span><span class="stdlib-type">fn</span><span class="stdlib-operator">(</span><span class="stdlib-ident">T</span><span class="stdlib-operator">)</span><span class="stdlib-operator">-&gt;</span><a href="Option.pf.html#Option339"><span class="stdlib-union">Option</span></a><a href="Nat.pf.html#operator<199"><span class="stdlib-operator">&lt;</span></a><span class="stdlib-ident">U</span><a href="Nat.pf.html#operator>200"><span class="stdlib-operator">&gt;</span></a><span class="stdlib-operator">,</span> <span class="stdlib-ident">P</span><span class="stdlib-operator">:</span><a href="Set.pf.html#Set346"><span class="stdlib-union">Set</span></a><a href="Nat.pf.html#operator<199"><span class="stdlib-operator">&lt;</span></a><span class="stdlib-ident">T</span><a href="Nat.pf.html#operator>200"><span class="stdlib-operator">&gt;</span></a><span class="stdlib-operator">.</span>
  <a href="Maps.pf.html#domain174"><span class="stdlib-function">domain</span></a><span class="stdlib-operator">(</span><span class="stdlib-ident">restrict</span><span class="stdlib-operator">(</span><span class="stdlib-ident">f</span><span class="stdlib-operator">,</span> <span class="stdlib-ident">P</span><span class="stdlib-operator">)</span><span class="stdlib-operator">)</span> <a href="Set.pf.html#operator⊆352"><span class="stdlib-operator">&#x2286;</span></a> <span class="stdlib-ident">P</span>
<span class="stdlib-keyword">proof</span>
  <span class="stdlib-keyword">arbitrary</span> <span class="stdlib-ident">T</span><span class="stdlib-operator">:</span><span class="stdlib-type">type</span><span class="stdlib-operator">,</span> <span class="stdlib-ident">U</span><span class="stdlib-operator">:</span><span class="stdlib-type">type</span>
  <span class="stdlib-keyword">arbitrary</span> <span class="stdlib-ident">f</span><span class="stdlib-operator">:</span><span class="stdlib-type">fn</span><span class="stdlib-operator">(</span><span class="stdlib-ident">T</span><span class="stdlib-operator">)</span><span class="stdlib-operator">-&gt;</span><a href="Option.pf.html#Option339"><span class="stdlib-union">Option</span></a><a href="Nat.pf.html#operator<199"><span class="stdlib-operator">&lt;</span></a><span class="stdlib-ident">U</span><a href="Nat.pf.html#operator>200"><span class="stdlib-operator">&gt;</span></a><span class="stdlib-operator">,</span> <span class="stdlib-ident">P</span><span class="stdlib-operator">:</span><a href="Set.pf.html#Set346"><span class="stdlib-union">Set</span></a><a href="Nat.pf.html#operator<199"><span class="stdlib-operator">&lt;</span></a><span class="stdlib-ident">T</span><a href="Nat.pf.html#operator>200"><span class="stdlib-operator">&gt;</span></a>
  <span class="stdlib-keyword">suffices</span> <span class="stdlib-operator">(</span><span class="stdlib-keyword">all</span> <span class="stdlib-ident">x</span><span class="stdlib-operator">:</span><span class="stdlib-ident">T</span><span class="stdlib-operator">.</span> <span class="stdlib-operator">(</span><span class="stdlib-keyword">if</span> <span class="stdlib-ident">x</span> <a href="Set.pf.html#operator∈351"><span class="stdlib-operator">&#x2208;</span></a> <a href="Set.pf.html#Set346"><span class="stdlib-constructor">char_fun</span></a><span class="stdlib-operator">(</span><span class="stdlib-operator">&#x03BB;</span><span class="stdlib-ident">x'</span><span class="stdlib-operator">{</span><span class="stdlib-keyword">switch</span> <span class="stdlib-operator">(</span><span class="stdlib-keyword">if</span> <span class="stdlib-ident">x'</span> <a href="Set.pf.html#operator∈351"><span class="stdlib-operator">&#x2208;</span></a> <span class="stdlib-ident">P</span> <span class="stdlib-keyword">then</span> <span class="stdlib-ident">f</span><span class="stdlib-operator">(</span><span class="stdlib-ident">x'</span><span class="stdlib-operator">)</span>
                                                 <span class="stdlib-keyword">else</span> <span class="stdlib-operator">@</span><a href="Option.pf.html#Option339"><span class="stdlib-constructor">none</span></a><a href="Nat.pf.html#operator<199"><span class="stdlib-operator">&lt;</span></a><span class="stdlib-ident">U</span><a href="Nat.pf.html#operator>200"><span class="stdlib-operator">&gt;</span></a><span class="stdlib-operator">)</span>
            <span class="stdlib-operator">{</span> <span class="stdlib-keyword">case</span> <a href="Option.pf.html#Option339"><span class="stdlib-constructor">none</span></a><span class="stdlib-operator">{</span><span class="stdlib-prim">false</span><span class="stdlib-operator">}</span> <span class="stdlib-keyword">case</span> <a href="Option.pf.html#Option339"><span class="stdlib-constructor">just</span></a><span class="stdlib-operator">(</span><span class="stdlib-ident">y</span><span class="stdlib-operator">)</span><span class="stdlib-operator">{</span><span class="stdlib-prim">true</span><span class="stdlib-operator">}</span> <span class="stdlib-operator">}</span><span class="stdlib-operator">}</span><span class="stdlib-operator">)</span> <span class="stdlib-keyword">then</span> <span class="stdlib-ident">x</span> <a href="Set.pf.html#operator∈351"><span class="stdlib-operator">&#x2208;</span></a> <span class="stdlib-ident">P</span><span class="stdlib-operator">)</span><span class="stdlib-operator">)</span>
      <span class="stdlib-keyword">by</span> <span class="stdlib-keyword">definition</span> <span class="stdlib-operator">{</span><span class="stdlib-ident">restrict</span><span class="stdlib-operator">,</span> <a href="Maps.pf.html#domain174"><span class="stdlib-function">domain</span></a><span class="stdlib-operator">,</span> <a href="Set.pf.html#operator⊆352"><span class="stdlib-function">operator ⊆</span></a><span class="stdlib-operator">}</span>
  <span class="stdlib-keyword">arbitrary</span> <span class="stdlib-ident">x</span><span class="stdlib-operator">:</span><span class="stdlib-ident">T</span>
  <span class="stdlib-keyword">suppose</span> <span class="stdlib-ident">prem</span>
  <span class="stdlib-keyword">switch</span> <span class="stdlib-ident">x</span> <a href="Set.pf.html#operator∈351"><span class="stdlib-operator">&#x2208;</span></a> <span class="stdlib-ident">P</span> <span class="stdlib-operator">{</span>
    <span class="stdlib-keyword">case</span> <span class="stdlib-prim">true</span> <span class="stdlib-operator">{</span> <span class="stdlib-operator">.</span> <span class="stdlib-operator">}</span>
    <span class="stdlib-keyword">case</span> <span class="stdlib-prim">false</span> <span class="stdlib-keyword">suppose</span> <span class="stdlib-ident">Px_false</span> <span class="stdlib-operator">{</span>
      <span class="stdlib-keyword">conclude</span> <span class="stdlib-prim">false</span> <span class="stdlib-keyword">by</span>
        <span class="stdlib-keyword">rewrite</span> <span class="stdlib-operator">(</span><span class="stdlib-keyword">definition</span> <a href="Set.pf.html#operator∈351"><span class="stdlib-function">operator∈</span></a> <span class="stdlib-keyword">in</span> <span class="stdlib-ident">Px_false</span><span class="stdlib-operator">)</span> <span class="stdlib-keyword">in</span>
        <span class="stdlib-keyword">definition</span> <span class="stdlib-operator">{</span><a href="Set.pf.html#operator∈351"><span class="stdlib-function">operator∈</span></a><span class="stdlib-operator">,</span> <a href="Set.pf.html#rep347"><span class="stdlib-function">rep</span></a><span class="stdlib-operator">}</span> <span class="stdlib-keyword">in</span> <span class="stdlib-ident">prem</span>
    <span class="stdlib-operator">}</span>
  <span class="stdlib-operator">}</span>
<span class="stdlib-keyword">end</span>

    </code></pre>
</body>
</html>